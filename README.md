ИГРА шахматы

Протокол:

Registration:
<pre>
CLIENT                                                                      SERVER

REG please LOGIN %login% PASSW  %password%    ---->    Регистрация пользователя, если логин уникальный
                                              <----    SUCC REG, если регистрация успешна / ERROR NON_UNIQUE_LOGIN если логин уже есть 

</pre>

Login:
<pre>
CLIENT                                                                      SERVER

LOGIN %login% PASSW %password%     ---->    аутентификация пользователя, 
                                   <----    SUCC AUTH, если аутентификация прошла успешно /
                                            один из ответов в зависимости от ситуации: /
                                            ERROR NO_LOGIN, ERROR NO_PASSWORD, ERROR LOGIN_OR_PASSWORD"

</pre>

Создание комнаты (возможно только после регистрации или аутентификации, иначе вернется ERROR UNKNOWN_COMMAND):
<pre>
CLIENT                                                                      SERVER

ROOM NEW                           ---->   Создает новую комнату
                                   <----   GAME_ID %id% возвращает id, по которому можно попасть в комнату 

</pre>

Подключение к существующей комнате (возможно только после регистрации или аутентификации, иначе вернется ERROR UNKNOWN_COMMAND):
<pre>
CLIENT                                                                      SERVER

ROOM %id%                          ---->   Проверяет, что комната существует
                                   <----   SUCC ROOM, если id верный, иначе ERROR INCORRECT_ROOM_ID_ERROR

</pre>


Попав в комнату можно начинать делать ходы:

<pre>
CLIENT                                                                      SERVER
MOVE 11-12 (переместить фигуру с поля 1,1 на 1,2) нумеруется с 0 ---->      Делает ход и меняет местоположение на карте \
                                                                            (проверяет корректность хода в перспективе)
                                                                            Возвращает ERROR INCORRECT_MOVE, если ход недопустимый
                                                                            иначе возвращает карту(описание см ниже):
                                                                            [
                                                                            ["r","kn","b","q","kg","b","kn","r"],
                                                                            [".",".","p","p","p","p","p","p"],
                                                                            [".",".",".",".",".",".",".","."],
                                                                            [".",".",".",".",".",".",".","."],
                                                                            [".",".",".",".",".",".",".","."],
                                                                            [".",".",".",".",".",".",".","."],
                                                                            ["P","P","P","P","P","P","P","p"],
                                                                            ["R","KN","B","KG","Q","B","KN","r"]
                                                                            ]

</pre>


Описание карты:
r - rook, kn - knight, b - bishop, kg - king, q - queen. Большая буква - белые, маленькая - черные.
